<!DOCTYPE html>
<html>
<head>
  <title>Artboards</title>
  <link rel="stylesheet" type="text/css" href="https://bootswatch.com/paper/bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="../static/style.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<script type="text/javascript">
  function search() {
    var input = document.getElementById('search');
    var filter = input.value.toUpperCase();
    var divs =document.getElementsByClassName("col-md-3");
    for (i = 0; i < divs.length; i++) {
      div = divs[i]
      if (div.id.toUpperCase().indexOf(filter) > -1) {
        div.style.display = "";
      } else {
        div.style.display = "none";
      }
    }
  }
  function update(artboard) {
    $('#artboard-uuid').val(artboard);
    $('#svgfile').click();
    document.getElementById("svgfile").onchange = function() {
      document.getElementById("update-artboard").submit();
    }
  }
</script>
<body>
  <nav class="navbar navbar-inverse" style="margin-bottom:0;background-color:#fb6946;">
    <div class="container-fluid" style="margin:auto;display:table;">
      <div class="navbar-header" style="display:inline-block;">
        <a class="navbar-brand" style="color:#FFFFFF;font-size:30px" href="/projects">Projects</a>
      </div>   
    </div>
  </nav>
  <div style="padding:0px 20px;">
    <div class="container-fluid">

      <div class="col-sm-3" style="margin-top:28px;padding-left:40px;">
        <div style="font-size:10px">
          <div><strong>Type: {{ screen }}</strong></div>
          <div>Density: {{ density }}</div>
          <div>Created:  {{ created }}</div>
          <div>Last Updated: {{ last_updated }} </div>
        </div>
        <div style="font-size:12px;margin-top:15px;">
          <strong>Name</strong> | last updated
        </div>
      </div>   

      <div class="col-sm-6" style="margin-top:80px;text-align:center;">
        <button class="btn-warning" style="background-color:#ffbd36;color:black;font-size:25px;height:50px;width:240px;">DASHBOARD</button>
        <button style="font-size:25px;background-color:#ffffff;border:none;">STYLEGUIDE</button>
      </div>

      <div class="col-sm-3" style="margin-top:25px;text-align:right;padding-right:40px;">
        <div style="font-size:12px">
          <input type="text" id="search" placeholder="SEARCH SCREENS" style="background-color:#fbc8bc;width:175px;text-align:center;border-radius:20px;font-size:12px;" onkeyup="search();"><span class="glyphicon glyphicon-search"></span>
        </div>
        <div style="font-size:12px;margin-top:10px">
          OWNER: <strong>{{ owner }}</strong>
        </div>
        <div style="margin-top:10px;">
          <div class="col-sm-6" style="padding:none">
            <div class="dropdown">
              <button class="btn-success dropdown-toggle" type="button" data-toggle="dropdown" style="background-color:#ffffff;border:none;color:#000000;padding:10px 0px;font-size:9px">VIEW MEMBERS
                <span class="caret"></span></button>
                <ul class="dropdown-menu" data-toggle="modal" data-target="#">
                  {% if shared_members %}
                  {% for member in shared_members %}
                  <li><a href="#">{{ member.email }}</a></li>
                  {% endfor %}
                  {% endif %}
                </ul>
              </div>
            </div>
            <div class="col-sm-6" style="padding-right:0px;" data-toggle="modal" data-target="#myModal">
              <button class="btn-warning" style="background-color:#ffbd36;color:black;height:30px;width:125px;font-size:16px;">SHARE</button>
            </div>
          </div>
        </div>
      </div>

      <div class="container-fluid" style="padding-top:20px">
        {% if artboards %}
        {% for artboard in artboards %}
        {% if artboard.latest %}
        <div class="col-md-3" id="{{ artboard.artboard }}" style="text-align:center;padding:15px">
          <div style="height:255px;width:250px;margin:auto; position: relative;">
            <a href='/svg?url={{artboard.location}}'>
              <div style="background-image:url(/{{ artboard.location }});height:255px;width:250px;position:relative;">
                <div class="caption" style="position:absolute;bottom:0;width:100%">
                  <div>
                    <button class="btn art-name" style="width:98%;border-radius:20px;background-color:#f5f5f5;color:#000000;">{{ artboard.artboard }}</button>
                  </div>
                </div>
              </div>
            </a>
            <div class="dropdown" style="position:absolute;top:5px;right:10px;">
              <button class="btn dropdown-toggle" type="button" data-toggle="dropdown" style="margin-left:225px;margin-top:10px;border-radius:50%;background-color:#fb6946;">
                <span class="glyphicon glyphicon-cog" style="font-size:15px;color:#ffffff;margin-top:5px;">
                </span>
              </button>
              <ul class="dropdown-menu" style="right: 0; left: inherit;">                      
                <li> <a href="#" data-toggle="modal" data-target="#{{ artboard.uuid }}">RENAME</a></li>
                <li><a href="#" onclick="update('{{ artboard.uuid }}');">UPDATE</a></li>
                <li><a href="/download_artboard?artboard={{ artboard.location }}">DOWNLOAD</a></li>
                <li><a href="/delete_artboard?artboard={{ artboard.location }}">DELETE</a></li>
              </ul>  
            </div>
          </div>
          <div class="modal fade" id="{{ artboard.uuid }}" role="dialog">
            <div class="modal-dialog">
              <!-- Modal content-->
              <div class="modal-content">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Rename Artboard</h4>
                </div>
                <div class="modal-body">
                  <form class = "form-main-class" action="/rename_artboard/" method="post">
                    {% csrf_token %}
                    <input class="input-class" type="text" id="new-name" name="new-name" placeholder="New name" /><br>
                    <input class="input-class" type="text" id="artboard" name="artboard" value="{{ artboard.location }}" style="display:none;" /><br>
                    <button  class="btn" type="submit">CHANGE</button>
                  </form>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>
        </div>
        {% endif %}
        {% endfor %}
        {% endif %}
      </div>

<!--       {% if edit %}
      <div class = "container" style="margin-top:30px;">
        <form class = "form-main-class" action="/svg_images/" method="post" enctype="multipart/form-data">
         {% csrf_token %}
         <h4 class="text-class">Upload Art Boards</h4>
         <input class="input-class" type="file" id="svgfile" name="svgfile" multiple />
         <button  class="list-btn-user" type="submit">Upload</button>
       </form>
     </div>
     {% endif %} -->

     <div class="modal fade" id="myModal" role="dialog">
      <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal">&times;</button>
            <h4 class="modal-title">Choose Sharing options</h4>
          </div>
          <div class="modal-body">
            <form class = "form-main-class" action="/share_project/" method="post">
              {% csrf_token %}
              <input class="input-class" type="text" id="email" name="email" placeholder="Email ID" /><br>
              <input type="checkbox" name="share" value="share">This user can share with others<br>
              <input type="checkbox" name="edit" value="edit">This user can edit the Project<br>
              <button  class="list-btn-user" type="submit">SHARE</button>
            </form>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
          </div>
        </div>
      </div>
    </div>
    <div class = "container" style="margin-top:30px;visibility:hidden;">
      <form class = "form-main-class" id='update-artboard' action="/update_artboard/" method="post" enctype="multipart/form-data">
       {% csrf_token %}
       <input class="input-class" type="file" id="svgfile" name="svgfile"/>
       <input type="text" id="artboard-uuid" name="artboard-uuid" value="">
       <button  class="btn" type="submit">Upload</button>
     </form>
   </div>
 </div>
</body>
</html>